1)install nodemon,express,mongoose
2)admin,autogenerated password:zDi7xYdxfE2rOVBE
3)const express = require('express')
const mongoose=require('mongoose')
const app=express()

## 4)connection of mongodb

mongoose.connect("mongodb+srv://admin:zDi7xYdxfE2rOVBE@cluster0.dl2vku1.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0")
.then(()=>console.log("Connected to Database")).then(()=>{
app.listen(5000)
}).catch((err)=>console.log(err))

## 5)Middleware

// Middleware (check localhost:5000)
app.use('/',(req,res,next)=>{
res.send("This is our starting app")
})

## 6)create folder model,routes,controllers

## model/Book.js

const mongoose=require('mongoose')
const Schema=mongoose.Schema

const bookSchema=({
name:{
type:String,
required:true
},
author:{
type:String,
required:true
},
description:{
type:String,
required:true
},
price:{
type:Number,
required:true
},
available:{
type:Boolean,
},

})

module.exports =mongoose.model('Book',bookSchema)

## routes/book-routes.js

const express=require('express')
const router=express.Router()
const Book =require('../model/Book')

router.get('/',async(req,res,next)=>{
// This route will provide all of the books
let books;
try {
books=await Book.find()

    } catch (err) {
        console.log(err)
    }
    if(!books){
        return res.status(404).json({message:"No products found"})
    }
    return res.status(200).json({books})

})

module.exports=router

## 7)app.js

const router=require('./routes/book-routes')

// Middleware
app.use("/books",router); //localhost:5000/books

8)then go to the postman get-http://localhost:5000/books(it will give an empty array)

## 9)create controller folder/books-controller.js

const Book = require('../model/Book')

// get all books
const getAllBooks=async(req,res,next)=>{
let books;
try {
books=await Book.find()

    } catch (err) {
        console.log(err)
    }
    if(!books){
        return res.status(404).json({message:"No products found"})
    }
    return res.status(200).json({books})

}

exports.getAllBooks=getAllBooks

## 10)controller/book-controller.js

// add books
const addBook=async(req,res,next)=>{
const {name,author,description,price,available}=req.body
let book;
try {
book=new Book({
name,
author,
description,
price,
available
})
await book.save()

    } catch (err) {
        console.log(err)

    }
    if(!book){
        return res.status(500).json({message:"Unable to add"})
    }
    return res.status(201).json({book})

}
exports.addBook=addBook

## 11)routes/book-routes.js

router.post("/",booksController.addBook)
12)app.js

---

// it will converts all data in json format
app.use(express.json())

## 12)go to the postman (to create books)

{
"name":"Sample",
"author":"ABC",
"description":"This is the sample book",
"price":1200,
"available":true
}

## 13)controller/book-controller.js

// get by id
const getById=async(req,res,next)=>{
const id=req.params.id
let book;
try {
book=await Book.findById(id)

    } catch (error) {
        console.log(err)
    }
    if(!book){
        return res.status(404).json({message:"No Book found"})
    }
    return res.status(200).json({book})

}

## 14)app.js

router.get("/:id",booksController.getById)
router.put("/:id",booksController.getById)
router.put("/:id",booksController.updateBook)
router.delete("/:id",booksController.deleteBook)


## 15)controller/book-controller.js

// update book
const updateBook = async (req, res, next) => {
const id = req.params.id;
const { name, author, description, price, available } = req.body;
let book;
try {
book = await Book.findByIdAndUpdate(id, {
name,
description,
author,
price,
available,
});
book = await book.save();
} catch (error) {
console.log(error);
}
if (!book) {
return res.status(404).json({ message: "Unable to update by this Id" });
}
return res.status(200).json({book})
};

16.controller/book-controller.js
---------------------------------
// delete book
const deleteBook = async (req, res, next) => {
    const id = req.params.id;
    let book;
    try {
        book = await Book.findByIdAndDelete(id);
    } catch (err) {
        console.log(err);
    }
    if (!book) {
        return res.status(404).json({ message: "Unable to delete by this Id" });
    }
    return res.status(200).json({ message: "Product Successfully deleted" });
};

17)install cors .it avoid cross origin block(it avoid block the security)
--------------------------------------------------------------------------
const cors=require('cors')
app.use(cors())
